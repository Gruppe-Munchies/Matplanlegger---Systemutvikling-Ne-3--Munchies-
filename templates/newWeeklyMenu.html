{% extends 'base.html' %}
{% block title %}AddWeekly{% endblock %}
{% block heading %}Legg til ukesmeny{% endblock %}
{% block description %}For gruppe {{ session.get('groupname_to_use') }}{% endblock %}

{% block content %}

    <h1>Retter som ligger i ukesmenyen</h1>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Matrett</th>
            <th>Antall</th>

        </tr>
        </thead>
        <tbody>


        {% for weeklyMenu in weeklyMenus %}
            <tr>
                <td class=" w-50 ">
                    {{ weeklyMenu.name }}
                </td>

                <td class=" w-50 ">
                    {{ weeklyMenu.expectedConsumption }}
                </td>

                <td class=" w-auto ">
                    <a href="#" id="{{ loop.index }}-RemoveFromRecipe" type="button"
                       class="btn btn-outline-primary btn-sm"><i
                            class="bi bi-trash"></i></a>
                </td>
            </tr>

            <script>
                document.getElementById("{{ loop.index }}-RemoveFromRecipe").onclick = function () {
                    document.getElementById('{{ loop.index }}-RemoveFromRecipe').href = "/weekly_menu/{{ weeklyMenu.recipe_idRecipe }}/delete";
                }
            </script>
        {% endfor %}
        </tbody>

    </table>

    <h1>Legg til oppskrift i ukesmenyen</h1>

    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>Matrett</th>
            <th>Antall</th>

        </tr>
        </thead>
        <tbody>


        {% for recipe in recipes %}
            {% if recipe.name not in dishes %}
                <tr>
                    <td class=" w-50 ">
                        {{ recipe.name }}
                    </td>

                    <td class=" w-50 ">
                        <input type="number" id="{{ loop.index }}-quantityFormAdd" value="1" class="form-control w-25" min="1"
                               steps="0.1"/>
                    </td>

                    <td class=" w-auto ">
                        <a href="#" id="{{ loop.index }}-addToRecipe" type="button"
                           class="btn btn-outline-primary btn-sm"><i
                                class="bi bi-plus"></i></a>
                    </td>

                </tr>

                <script>
                    document.getElementById("{{ loop.index }}-addToRecipe").onclick = function () {
                        var getQuantity = document.getElementById('{{ loop.index }}-quantityFormAdd').value;
                        document.getElementById('{{ loop.index }}-addToRecipe').href = "/weekly_menu/{{ recipe.idRecipe }}/" + getQuantity + "/add";
                    }
                </script>

            {% endif %}
        {% endfor %}
        </tbody>

    </table>

{% endblock %}



